# 베이스 이미지
FROM ubuntu:22.04

# 이미지 빌드 시 실행할 명령어 (패키지 설치)
RUN apt update && apt install -y openjdk-11-jdk wget 

# Tomcat 9.0 다운로드 명령어
RUN wget https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.109/bin/apache-tomcat-9.0.109.tar.gz -P /home/tomcat

# Tomcat 9.0 압축 풀기 명령어
RUN tar -xzvf /home/tomcat/apache-tomcat-9.0.109.tar.gz -C /home/tomcat

# index.html 파일을 이미지 내부 Tomcat 9.0 배포 경로로 복사
COPY index.html /home/tomcat/apache-tomcat-9.0.109/webapps/ROOT/index.html

# 이미지 빌드와 컨테이너 실행 시 사용할 수 있는 환경 변수
ENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64

# 컨테이너 톰캣 포트 열기
EXPOSE 8080

# 컨테이너 실행 시 수행할 명령어
CMD ["home/tomcat/apache-tomcat-9.0.109/bin/catalina.sh", "run"]

